# AI Platform

社内AI基盤 - MCPツールとLLMを統合したAIエージェントプラットフォーム

## 構成イメージ

```
┌─────────────────────────────────────────────────────────────────────┐
│  AI Platform                                                        │
│                                                                     │
│  ┌──────────────────┐  ┌──────────────────────────────────────┐    │
│  │ Web App          │  │ Prompt Template Manager               │    │
│  │ (FastAPI)        │  │ - デザインシステムヘルパー            │    │
│  │                  │  │ - コードレビュー                      │    │
│  │ /chat            │  │ - タスク分解                          │    │
│  │ /tools           │  │ - Slack要約                           │    │
│  │ /prompts         │  └──────────────────────────────────────┘    │
│  └──────────────────┘                                               │
│           │                                                         │
│           ▼                                                         │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │ AI Agents (LangChain / LangGraph)                            │  │
│  │                                                              │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │  │
│  │  │ general     │  │ design-     │  │ custom      │          │  │
│  │  │ agent       │  │ system      │  │ agent       │          │  │
│  │  │             │  │ agent       │  │             │          │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘          │  │
│  │        │                │                │                   │  │
│  │        └────────────────┴────────────────┘                   │  │
│  │                         │                                    │  │
│  │                         ▼                                    │  │
│  │              ┌──────────────────────┐                        │  │
│  │              │ MCP Tool Adapter     │                        │  │
│  │              │ (MCP → LangChain)    │                        │  │
│  │              └──────────────────────┘                        │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                              │                                      │
└──────────────────────────────┼──────────────────────────────────────┘
                               │
         ┌─────────────────────┼─────────────────────┐
         │                     │                     │
         ▼                     ▼                     ▼
┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐
│ OpenAI API      │  │ Vertex AI       │  │ Anthropic       │
│ (gpt-4o-mini)   │  │ (Gemini)        │  │ (Claude)        │
└─────────────────┘  └─────────────────┘  └─────────────────┘

                               │
         ┌─────────────────────┼─────────────────────┐
         │                     │                     │
         ▼                     ▼                     ▼
┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐
│ design-system   │  │ calc            │  │ external-api    │
│ MCP Server      │  │ MCP Server      │  │ MCP Server      │
└─────────────────┘  └─────────────────┘  └─────────────────┘
```

## セットアップ

```bash
# 依存関係のインストール
make install

# 環境変数の設定
cp .env.example .env
# .env を編集して API キーを設定

# サーバー起動
make run

# 開発モード（ホットリロード）
make dev
```

## API エンドポイント

| メソッド | パス | 説明 |
|---------|------|------|
| GET | `/` | ヘルスチェック |
| GET | `/health` | 詳細なヘルスチェック |
| POST | `/chat` | チャット（エージェント指定可） |
| GET | `/tools` | 利用可能なMCPツール一覧 |
| GET | `/agents` | 利用可能なエージェント一覧 |
| GET | `/prompts` | プロンプトテンプレート一覧 |
| POST | `/prompts/render` | テンプレートをレンダリング |

## 使用例

```bash
# チャット
curl -X POST http://localhost:8000/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Buttonコンポーネントの使い方を教えて", "agent": "design-system"}'

# ツール一覧
curl http://localhost:8000/tools
```

## ディレクトリ構成

```
ai_platform/
├── api/
│   ├── main.py              # FastAPI サーバー
│   ├── llm_providers.py     # LLM プロバイダー (OpenAI/Vertex/Anthropic)
│   ├── agents/              # LangChain/LangGraph エージェント
│   ├── mcp_adapter/         # MCP → LangChain ツール変換
│   └── prompts/             # プロンプトテンプレート管理
├── config/
│   └── mcp_servers.json     # 接続するMCPサーバー設定
├── pyproject.toml
└── Makefile
```
